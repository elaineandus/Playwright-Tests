import { test, expect } from '@playwright/test';

test('seller should be able to upload photos', async ({ page }) => {
  await page.setDefaultTimeout(60000);
  await page.goto('https://stag.carbids.ph/');
  /* await new Promise(resolve => setTimeout(resolve, 2000)); */
  
  await page.getByRole('link', { name: 'Sign in' }).click();
  await page.getByRole('textbox', { name: 'Email address' }).fill('elaine.andus@iainnovations.com');
  await page.getByPlaceholder('Enter password').fill('password');
  await page.getByRole('button', { name: 'Sign in' }).click();

  await page.getByRole('banner').getByRole('link', { name: 'Sell car' }).click();

  // Upload #exterior input field manually
  const exteriorInputSelector = '#exterior input[type="file"]';
  await page.setInputFiles(exteriorInputSelector, ['C:\\Users\\IA-Trainee\\Documents\\GitHub\\Playwright-Tests\\e2e\\carext1.jpeg']);

  // Drag and drop #exterior input field
  const exteriorInputElement = await page.$(exteriorInputSelector);
  const exteriorFilePath = 'C:\\Users\\IA-Trainee\\Documents\\GitHub\\Playwright-Tests\\e2e\\carext2.jpeg';

  const exteriorInputBox = await exteriorInputElement.boundingBox();
  const exteriorInputCenter = {
    x: exteriorInputBox.x + exteriorInputBox.width / 2,
    y: exteriorInputBox.y + exteriorInputBox.height / 2,
  };

  await page.mouse.move(exteriorInputCenter.x, exteriorInputCenter.y);
  await page.mouse.down();
  await page.mouse.move(exteriorInputCenter.x + 10, exteriorInputCenter.y + 10);
  await page.mouse.up();
  await new Promise(resolve => setTimeout(resolve, 5000));
  await exteriorInputElement.setInputFiles(exteriorFilePath);

  // Upload #interior input field manually
  const interiorInputSelector = '#interior input[type="file"]';
  await page.setInputFiles(interiorInputSelector, ['C:\\Users\\IA-Trainee\\Documents\\GitHub\\Playwright-Tests\\e2e\\carint1.jpeg']);

  // Drag and drop #interior input field
  const interiorInputElement = await page.$(interiorInputSelector);
  const interiorFilePath = 'C:\\Users\\IA-Trainee\\Documents\\GitHub\\Playwright-Tests\\e2e\\carint2.jpeg';

  const interiorInputBox = await interiorInputElement.boundingBox();
  const interiorInputCenter = {
    x: interiorInputBox.x + interiorInputBox.width / 2,
    y: interiorInputBox.y + interiorInputBox.height / 2,
  };

  await page.mouse.move(interiorInputCenter.x, interiorInputCenter.y);
  await page.mouse.down();
  await page.mouse.move(interiorInputCenter.x + 10, interiorInputCenter.y + 10);
  await page.mouse.up();
  await new Promise(resolve => setTimeout(resolve, 5000));
  await interiorInputElement.setInputFiles(interiorFilePath);

  // Upload #others input field manually
  const othersInputSelector = '#others input[type="file"]';
  await page.setInputFiles(othersInputSelector, ['C:\\Users\\IA-Trainee\\Documents\\GitHub\\Playwright-Tests\\e2e\\carothers1.jpeg']);

  // Drag and drop #others input field
  const othersInputElement = await page.$(othersInputSelector);
  const othersFilePath = 'C:\\Users\\IA-Trainee\\Documents\\GitHub\\Playwright-Tests\\e2e\\carothers2.jpeg';

  const othersInputBox = await othersInputElement.boundingBox();
  const othersInputCenter = {
    x: othersInputBox.x + othersInputBox.width / 2,
    y: othersInputBox.y + othersInputBox.height / 2,
  };

  await page.mouse.move(othersInputCenter.x, othersInputCenter.y);
  await page.mouse.down();
  await page.mouse.move(othersInputCenter.x + 10, othersInputCenter.y + 10);
  await page.mouse.up();
  await new Promise(resolve => setTimeout(resolve, 5000));
  await othersInputElement.setInputFiles(othersFilePath);

});

